# 应用状态空间法解决十五数码问题



## 1、问题描述

**十五数码问题** 是 $4 * 4$ 方格盘上，放有 $15$ 个数码，剩下一个位置为空（方便起见，用 $0$​ 表示空），空格的上下左右格子的数码可移动至空格。本问题给定初始数码状态和目标数码状态，要求通过一系列的移动，将初始状态转化为目标状态。   

**移动规则**：空格四周的数移向空格，我们可以看作是空格移动，它最多可以有4个方向的移动，即上、下、左、右。问题的求解方法，就是从给定的初始状态出发，不断地将空格上下左右的数移至空格，将一个状态转化成其它状态，直到产生目标状态。   

## 2、算法分析   

​**状态空间法**：在搜索的每一步都利用估价函数 $f(n) = g(n) + h(n)$ 对 $Open$ 表中的节点进行排序，找到代价最小的一个节点，以此节点为基础拓展下一批次节点。其中 $f(n)$ 表示节点的总代价， $g(n)$ 表示当前节点的搜索深度， $h(n)$ 表示当前节点到目标状态的最佳路径的估计代价。 $h(n)$ 的具体计算为：当前节点和目标节点进行对比，每有一个位置的元素不同就累计 $1$ ，最终的值为 $h(n)$ 。   

**算法过程如下**：   
1、读入初始状态和目标状态，并计算初始状态评价函数值f；   
2、初始化两个open表和closed表，将初始状态放入open表中；   
3、如果open表为空，则查找失败；   
否则：   
① 在open表中找到评价值最小的节点，作为当前结点，并放入closed表中；   
② 判断当前结点状态和目标状态是否一致，若一致，跳出循环；否则跳转到③；   
③ 对当前结点，分别按照上、下、左、右方向移动空格位置来扩展新的状态结点，并计算新扩展结点的评价值f并记录其父节点；   
④ 对于新扩展的状态结点，进行如下操作：   
A．新节点既不在open表中，也不在closed表中，则添加进OPEN表；   
B．新节点在open表中，则计算评价函数的值，取最小的。   
C．新节点在closed表中，则计算评价函数的值，取最小的。   
⑤ 把当前结点从open表中移除；   
4、重复步骤3，直到 $Open$ 表为空表示无法到达目标状态，或者某一次的评价值最小节点为目标节点，输出路径并结束程序；   

## 3、算法流程图

[![image.png](https://i.postimg.cc/dQpLfg3W/image.png)](https://postimg.cc/3Wj84Sgp)

## 4、实验数据及运行结果

​**实验数据1**

```
起始数组：
[ 0  1  2  3]
[ 4  5  6  7]
[ 8  9 10 11]
[12 13 14 15]

目标数组：
[ 1  2  3  7]
[ 8  4  5  6]
[ 9 10 11 15]
[ 0 12 13 14]

输出结果：
状态可达，路径为：
---------------
0 1 2 3 
4 5 6 7 
8 9 10 11 
12 13 14 15 
---------------
1 0 2 3 
4 5 6 7 
8 9 10 11 
12 13 14 15 
---------------
1 2 0 3 
4 5 6 7 
8 9 10 11 
12 13 14 15 
---------------
1 2 3 0 
4 5 6 7 
8 9 10 11 
12 13 14 15 
---------------
1 2 3 7 
4 5 6 0 
8 9 10 11 
12 13 14 15 
---------------
1 2 3 7 
4 5 0 6 
8 9 10 11 
12 13 14 15 
---------------
1 2 3 7 
4 0 5 6 
8 9 10 11 
12 13 14 15 
---------------
1 2 3 7 
0 4 5 6 
8 9 10 11 
12 13 14 15 
---------------
1 2 3 7 
8 4 5 6 
0 9 10 11 
12 13 14 15 
---------------
1 2 3 7 
8 4 5 6 
9 0 10 11 
12 13 14 15 
---------------
1 2 3 7 
8 4 5 6 
9 10 0 11 
12 13 14 15 
---------------
1 2 3 7 
8 4 5 6 
9 10 11 0 
12 13 14 15 
---------------
1 2 3 7 
8 4 5 6 
9 10 11 15 
12 13 14 0 
---------------
1 2 3 7 
8 4 5 6 
9 10 11 15 
12 13 0 14 
---------------
1 2 3 7 
8 4 5 6 
9 10 11 15 
12 0 13 14 
---------------
1 2 3 7 
8 4 5 6 
9 10 11 15 
0 12 13 14 
---------------
Step = 15
```
